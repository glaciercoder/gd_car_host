# 软件名：mcu_5748

--------

## 版本号：1.1.0_0

- 日期：2020年8月19日
- 负责人：汤威
- 说明：在1.0plus车上的稳定版本

--------

## 版本号：1.1.0_1

- 日期：2020年9月25日
- 负责人：汤威
- 说明：增加了方向盘转角变化幅度限制

--------

## 版本号：1.1.0_2

- 日期：2020年9月26日
- 负责人：汤威
- 说明：将方向盘转角限制角度从200deg/s放开到500deg/s

--------

## 版本号：1.1.0_3
- 日期：2020年10月11日
- 负责人：卢飞腾
- 说明：去掉了方向盘转角变化幅度限制

--------

## 版本号：1.1.0_4
- 日期：2020年10月12日
- 负责人：汤威
- 说明：新增HMI点击自动驾驶可以自动关门继续规划的功能

--------

## 版本号：1.1.0_5
- 日期：2020年10月14日
- 负责人：汤威
- 说明：修复点击HMI自动驾驶无法自动关门的bug

--------

## 版本号：1.1.0_6
- 日期：2020年10月17日
- 负责人：汤威
- 说明：修复自动驾驶横向摆动过大的问题

--------

## 版本号：1.1.0_7
- 日期：2020年10月19日
- 负责人：汤威
- 说明：修改mcu接单部分can程序来适配上层接单程序；增加手柄模式下禁止通过HMI自动驾驶来关门的功能

--------

## 版本号：1.1.0_8
- 日期：2020年10月20日
- 负责人：汤威
- 说明：修改mcu代码解决到站起步关门失败的bug

--------

## 版本号：1.1.0_9

- 日期：2020年10月24日
- 负责人：卢飞腾
- 说明：修改mcu代码，解决由于东风给出的流程图和信号矩阵存在歧义造成的控制权抢夺问题，已测试通过

--------

## 版本号：1.1.0_10

- 日期：2020年10月26日
- 负责人：汤威
- 说明：修改mcu代码，增加上层安全策略处理代码

--------

## 版本号：1.1.0_11
- 日期：2020年11月2日
- 负责人：卢飞腾
- 说明：1. 修改横向控制参数，改善平滑性; 2. 修改纵向控制参数，减少点刹; 3. 修改限速值为16km/h，修改超速时的减速度为1m/s^2

--------

## 版本号：1.1.0_12
- 日期：2020年11月6日
- 负责人：汤威
- 说明：1. 修改纵向控制程序，使车辆自动驾驶纵向部分更平滑，减少刹车; 2. 增加自动驾驶、手柄、待机状态的切换程序; 3.增加epb拉起5s以及按下esc状态下，进入待机模式

--------

## 版本号：1.1.0_13
- 日期：2020年11月7日
- 负责人：汤威
- 说明：1. 修改程序flash地址分配，来适配以太网升级

--------

## 版本号：1.1.0_14
- 日期：2020年11月12日
- 负责人：汤威
- 说明：1.修改程序，实现手柄去使能后不会触发HMI手柄异常报错的问题

--------

## 版本号：1.1.0_15
- 日期：2020年11月19日
- 负责人：汤威
- 说明：1.修改程序，增加坡道预测程序，平滑自动驾驶刹车程序

--------

## 版本号：1.1.0_16
- 日期：2020年11月21日
- 负责人：汤威
- 说明：1.修改程序，增加坡道上下坡加减速阈值动态修改功能

--------

## 版本号：1.1.0_17
- 日期：2020年11月22日
- 负责人：汤威
- 说明：1.修改程序，优化下坡速度过快的问题

--------

## 版本号：1.1.0_18
- 日期：2020年11月27日
- 负责人：汤威
- 说明：1.修改程序，利用ESC4轮速信息重新计算新localpose坐标

--------

## 版本号：1.1.0_19
- 日期：2020年12月5日
- 负责人：汤威
- 说明：1.修改程序，优化纵向控制算法，目前速度控制稳定性较好

--------

## 版本号：1.1.0_20
- 日期：2020年12月12日
- 负责人：汤威
- 说明：1.修改程序，增加起步停车状态机，减缓起步大脚油门，增加下坡补偿，当前用于西安的版本

--------

## 版本号：1.1.0_21
- 日期：2020年12月12日
- 负责人：汤威
- 说明：1.修改程序，增加坡道辅助起步，减缓0~4度坡道补偿值

--------

## 版本号：1.1.0_22
- 日期：2020年12月12日
- 负责人：汤威
- 说明：1.修改程序，减缓弯道内切，增加AD5,AD6下发协议

--------

## 版本号：1.1.0_23
- 日期：2021年1月12日
- 负责人：汤威
- 说明：1.修改程序，增加超声波温度补偿程序

--------

## 版本号：1.1.0_24
- 日期：2021年2月4日
- 负责人：汤威
- 说明：1.修改程序，在刚进入epb模式前2s，保持-5m/s2的刹车大小，防止溜破

## 版本号：1.1.0_25

- 日期：2021年2月5日
- 负责人：卢飞腾
- 说明：将上一版的2s改为5s，防止epb未完全拉起时就松开刹车导致溜坡

## 版本号：1.1.0_26

- 日期：2021年2月5日
- 负责人：卢飞腾
- 说明：在上一版的保持5s的基础上，增加判断，若EPB未完全拉起，也保持刹车状态

## 版本号：1.1.0_27

- 日期：2021年2月6日
- 负责人：卢飞腾
- 说明：优化了AC和LAC版本切换的代码写法

## 版本号：1.1.0_28

- 日期：2021年2月6日
- 负责人：卢飞腾
- 说明：停车时的刹车值由-4.38改为-8.88，避免坡上刹不住；修复了1.1.0_27修改中的一处bug

## 版本号：1.1.0_29

- 日期：2021年2月6日
- 负责人：卢飞腾
- 说明：停车时的刹车指令不跳变，改成逐渐增加，每秒增加3m/s2

## 版本号：1.1.0_30

- 日期：2021年3月17日
- 负责人：卢飞腾
- 说明：转发给超声波的报文增加0x5c0、0x4c0

## 版本号：1.1.0_31

- 日期：2021年3月17日
- 负责人：卢飞腾
- 说明：修正了转发到超声波、IMU私有CAN的ESC3、ESC4报文的周期问题

## 版本号：1.1.0_32

- 日期：2021年3月23日
- 负责人：卢飞腾
- 说明：修复了起步时刹车抖动的问题；修改了1099端口发送数据

## 版本号：1.1.0_33

- 日期：2021年3月25日
- 负责人：卢飞腾
- 说明：增加hmi指定路线id转发

## 版本号：1.1.0_34

- 日期：2021年3月26日
- 负责人：卢飞腾
- 说明：在起步阶段增加速度控制Ki，避免被减速坎挡住导致起步失败

## 版本号：1.1.0_35

- 日期：2021年3月27日
- 负责人：卢飞腾
- 说明：起步Ki在上一个版本的基础上翻倍，减少减速坎起步时间

## 版本号：1.1.0_36

- 日期：2021年3月28日
- 负责人：卢飞腾
- 说明：在小坡道低速时，使用比较充足的油门补偿策略

## 版本号：1.1.0_37

- 日期：2021年3月29日
- 负责人：卢飞腾
- 说明：AD6报文增加起始站出发提醒

## 版本号：1.1.0_38

- 日期：2021年3月30日
- 负责人：卢飞腾
- 说明：起步Ki在1.1.0_35的基础上*5，减少减速坎起步时间

## 版本号：1.1.0_39

- 日期：2021年3月30日
- 负责人：卢飞腾
- 说明：修改参数，提高对横向位置偏差的修正，避免横向位置偏差累积过大导致急打方向修正

## 版本号：1.1.0_40

- 日期：2021年3月31日
- 负责人：卢飞腾
- 说明：1099端口打印数据增加横向控制变量；修复一处bug；

## 版本号：1.1.0_41

- 日期：2021年4月1日
- 负责人：卢飞腾
- 说明：在common.h中新增软件版本号定义，在1099端口打印数据增加版本号打印；超速时仅关闭油门，不再修改制动控制

## 版本号：1.1.0_42

- 日期：2021年4月1日
- 负责人：卢飞腾
- 说明：1099新增打印横向偏差；横向控制提高精度要求

## 版本号：1.1.0_43

- 日期：2021年4月1日
- 负责人：卢飞腾
- 说明：打开“等待rcu_feedback超过2000ms后，接管车辆控制权”功能（1.1.0_12不知道为什么注释掉了）

## 版本号：1.1.0_44

- 日期：2021年4月1日
- 负责人：卢飞腾
- 说明：“等待rcu_feedback超过2000ms后，接管车辆控制权”功能改为20s（1.1.0_12注释掉是因为rcu反应缓慢，需要5s左右才能反馈。2000ms接管车辆控制权会导致控制权争夺）

## 版本号：1.1.0_45

- 日期：2021年4月1日
- 负责人：卢飞腾
- 说明：增加1099打印内容

## 版本号：1.1.0_46

- 日期：2021年4月17日
- 负责人：卢飞腾
- 说明：降低lon_acc对制动pid参数的修改

## 版本号：1.1.0_47

- 日期：2021年5月10日
- 负责人：卢飞腾
- 说明：修改横向控制算法，避免突然修正

## 版本号：1.1.0_48

- 日期：2021年5月10日
- 负责人：卢飞腾
- 说明：修改横向控制参数，减小误差容忍量；修改纵向控制参数，降低加速PID的Kp、Ki、坡道补偿，避免加速过猛。

## 版本号：1.1.0_49

- 日期：2021年5月12日
- 负责人：卢飞腾
- 说明：修改纵向控制参数，增加坡道补偿，避免坡道起步溜坡。

## 版本号：1.1.0_50

- 日期：2021年5月15日
- 负责人：卢飞腾
- 说明：修改减速坎起步对策算法，在不影响平路起步的前提下加快减速坎起步速度。

## 版本号：1.1.0_51

- 日期：2021年5月16日
- 负责人：卢飞腾
- 说明：在坡度较小时也启用起步辅助制动，避免溜坡。

## 版本号：1.1.0_52

- 日期：2021年5月16日
- 负责人：卢飞腾
- 说明：修改油门变化量限值；修改起步时的Ki为动态参数；增加坡道辅助起步时的制动力。

## 版本号：1.1.0_53

- 日期：2021年5月20日
- 负责人：卢飞腾
- 说明：避免短时间停车起步时油门过猛。

## 版本号：1.1.0_54

- 日期：2021年5月24日
- 负责人：卢飞腾
- 说明：增加日志打印内容和频率，以排查突然打方向问题。

## 版本号：1.1.0_55

- 日期：2021年5月26日
- 负责人：卢飞腾
- 说明：修改一处可能导致突然打方向的参数。

## 版本号：1.1.0_56

- 日期：2021年6月5日
- 负责人：卢飞腾
- 说明：在切换到远程驾驶时，不判断RCU_Feedback报文和RCU1报文，直接退出控制。

## 版本号：1.1.0_57

- 日期：2021年6月22日
- 负责人：卢飞腾
- 说明：期望速度和实际速度均为0时，不直接将方向盘归0，而是平滑地归0。

## 版本号：1.1.0_58

- 日期：2021年6月25日
- 负责人：卢飞腾
- 说明：加强坡道驻车时的制动力；在低速且期望速度为0时，增加制动力补偿防止溜坡。

## 版本号：1.1.0_59

- 日期：2021年7月9日
- 负责人：卢飞腾
- 说明：mcu应用程序运行20秒内不检查mcu与101的通信状态，避免101未完全启动导致误报手柄连接异常。

## 版本号：1.1.0_60_beta

- 日期：2021年7月12日
- 负责人：卢飞腾
- 说明：can1发送邮箱从1个改为4个，试图减少发送丢帧问题。增加HHH硬件版本适配。

## 版本号：1.1.0_61_beta

- 日期：2021年7月13日
- 负责人：陈新田
- 说明：使用电机正反转检测功能实现车辆轮速方向判断。

## 版本号：1.1.0_62_beta

- 日期：2021年7月13日
- 负责人：卢飞腾
- 说明：将两处车速==0的判断改为车速<0.1，以支持溜坡场景。

## 版本号：1.1.0_63_beta

- 日期：2021年7月14日
- 负责人：卢飞腾
- 说明：修复了停车非起步状态下坡道起步辅助功能介入的bug。

## 版本号：1.1.0_64_beta

- 日期：2021年7月14日
- 负责人：陈新田
- 说明：解决重启后前面1-3帧会出现非预期数据问题。

## 版本号：1.1.0_65_beta

- 日期：2021年7月20日
- 负责人：陈新田
- 说明：解决CAN接收丢帧问题。

## 版本号：1.1.0_66_beta

- 日期：2021年7月20日
- 负责人：陈新田
- 说明：20秒未收到ARP回复，对电源控制脚重新上电，仅HHH硬件版本有效。

## 版本号：1.1.0_67_beta

- 日期：2021年7月31日
- 负责人：陈新田
- 说明：解决main函数主循环阻塞80ms问题。串口6接收1字节立即返回一字节。

## 版本号：1.1.0_68_beta

- 日期：2021年7月31日
- 负责人：陈新田
- 说明：有BootLoader就不操作PI0~PI2。

## 版本号：1.1.0_69

- 日期：2021年8月13日
- 负责人：陈新田
- 说明：解决控制器对外接口CAN总线并一起后从BootLoader进入APP后会导致复位问题;解决跑车过程中突然udp不向101发数据的问题。

## 版本号：1.1.0_70

- 日期：2021年10月9日
- 负责人：陈新田
- 说明：增加对LAC206_V21硬件版本支持

## 版本号：1.1.0_71

- 日期：2021年12月10日
- 负责人：陈新田
- 说明：修复上个版本双Xavier MAC读取只有1个

## 版本号：1.1.0_72

- 日期：2021年12月17日
- 负责人：陈新田
- 说明：修复CAN消息双缓存机制失效问题；控制算法继续优化双精度问题

## 版本号：1.1.0_73

- 日期：2022年1月5日
- 负责人：陈新田
- 说明：OBU4和OBU6新增信号

## 版本号：1.1.0_74

- 日期：2022年1月5日
- 负责人：陈新田
- 说明：新增AEB制动减速度程序

## 版本号：1.1.0_75

- 日期：2022年3月3日
- 负责人：陈新田
- 说明：从串口6读取GPRMC数据转发到Xavier

## 版本号：1.1.0_76

- 日期：2022年4月13日
- 负责人：卢飞腾
- 说明：将格纳微协议解析任务从中断移到主循环。

## 版本号：1.1.0_77

- 日期：2022年7月24日
- 负责人：卢飞腾
- 说明：将时间同步GPRMC的UDP报文改为广播。

## 版本号：1.1.0_78

- 日期：2022年8月3日
- 负责人：卢飞腾
- 说明：将UART6改为收完一包后才转发；将UART6发送改为中断方式；修复UART6 TX脚在空闲状态下的电平问题。